# Implementation Tasks

## 1. 准备和清理

- [ ] 1.1 移除 `src-tauri/src/accessibility.rs` 中的输入框检测代码
- [ ] 1.2 清理 `src-tauri/src/shortcut.rs` 中的长按事件监听逻辑
- [ ] 1.3 移除 `RecordingFloat.tsx` 中的自动隐藏倒计时代码

## 2. 后端 - 快捷键逻辑更新

- [ ] 2.1 修改 `src-tauri/src/shortcut.rs` 实现单次按键切换录音状态
- [ ] 2.2 添加录音状态追踪（idle → recording → processing）
- [ ] 2.3 实现窗口位置智能定位（鼠标附近，避免边缘）
- [ ] 2.4 添加快捷键事件：`shortcut-toggle`, `shortcut-stop`

## 3. 前端 - Zustand 状态管理

- [ ] 3.1 更新 `recordingStore.ts` 添加 `transcribedText` 状态
- [ ] 3.2 添加 `clearText()` action
- [ ] 3.3 添加 `copyText()` action
- [ ] 3.4 添加 `insertText()` action

## 4. 前端 - UI 组件重构

### 4.1 录音中状态 UI
- [ ] 4.1.1 创建胶囊型容器组件（300x60px）
- [ ] 4.1.2 实现左侧麦克风图标
- [ ] 4.1.3 实现中间声波动画组件
- [ ] 4.1.4 实现右侧关闭按钮
- [ ] 4.1.5 应用毛玻璃背景和圆角样式

### 4.2 结果展示状态 UI
- [ ] 4.2.1 实现文本显示区域（自适应高度）
- [ ] 4.2.2 实现底部操作栏组件
- [ ] 4.2.3 添加清空按钮（垃圾桶图标 + 功能）
- [ ] 4.2.4 添加复制按钮（复制图标 + 功能）
- [ ] 4.2.5 添加插入按钮（插入图标 + 功能）
- [ ] 4.2.6 实现按钮悬停和点击动画

### 4.3 状态切换逻辑
- [ ] 4.3.1 实现录音中 → 结果展示的过渡动画
- [ ] 4.3.2 实现窗口尺寸自适应调整
- [ ] 4.3.3 处理空结果状态显示

## 5. 前端 - 事件处理

- [ ] 5.1 监听 `shortcut-toggle` 事件切换录音状态
- [ ] 5.2 实现关闭按钮点击事件
- [ ] 5.3 实现 Esc 键关闭窗口
- [ ] 5.4 实现复制、插入、清空按钮事件

## 6. Tauri Commands

- [ ] 6.1 实现 `copy_to_clipboard(text: String)` command
- [ ] 6.2 实现 `insert_text(text: String)` command (调用文本插入模块)
- [ ] 6.3 实现 `hide_recording_window()` command

## 7. UI 样式精修

- [ ] 7.1 对照用户提供的设计稿调整颜色、间距、字体
- [ ] 7.2 实现声波动画的平滑过渡
- [ ] 7.3 优化按钮图标和提示文字
- [ ] 7.4 测试不同文本长度下的显示效果

## 8. 测试和调试

- [ ] 8.1 测试快捷键切换录音状态
- [ ] 8.2 测试窗口定位（不同屏幕象限）
- [ ] 8.3 测试文本复制功能
- [ ] 8.4 测试文本插入功能
- [ ] 8.5 测试手动关闭窗口
- [ ] 8.6 测试声波动画流畅度
- [ ] 8.7 修复发现的 bug

## 9. 文档和清理

- [ ] 9.1 更新 README.md 说明新的 UI 和交互
- [ ] 9.2 删除无用的调试日志
- [ ] 9.3 更新注释和文档字符串
